# –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º —Å–µ—Ä–≤—ñ—Å–æ–º –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤

## ‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á—ñ –∑–∞–ø–∏—Ç—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä—É —á–µ—Ä–µ–∑ API

**–¢–∞–∫, –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ–º—É –º–µ–Ω–µ–¥–∂–µ—Ä—É —á–µ—Ä–µ–∑ API –Ω–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–µ—Ä–≤—ñ—Å!**

## üìã –©–æ –±—É–ª–æ –¥–æ–¥–∞–Ω–æ

–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π –º–∞—Ä—à—Ä—É—Ç `/api/manager` –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º —á–µ—Ä–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–µ—Ä–≤—ñ—Å.

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–î–æ–¥–∞–π—Ç–µ –≤ Railway –∞–±–æ `.env` —Ñ–∞–π–ª:

```env
# URL –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤
MANAGER_SERVICE_URL=https://your-manager-service.com/api

# API –∫–ª—é—á –¥–ª—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
MANAGER_SERVICE_API_KEY=your-api-key-here

# ID –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (—è–∫—â–æ –º–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –∫–ª—ñ—î–Ω—Ç—É)
DEFAULT_MANAGER_ID=1
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ API

–í–∞—à –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–µ—Ä–≤—ñ—Å –º–∞—î –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π endpoint:

**POST** `/managers/{managerId}/requests`

**Request Body:**
```json
{
  "clientId": 123,
  "clientName": "–ù–∞–∑–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—ó",
  "clientEmail": "client@example.com",
  "clientPhone": "+380123456789",
  "requestType": "order",
  "message": "–¢–µ–∫—Å—Ç –∑–∞–ø–∏—Ç—É",
  "additionalData": {},
  "timestamp": "2024-01-01T12:00:00.000Z",
  "source": "SmartMarket"
}
```

**Response:**
```json
{
  "success": true,
  "requestId": "req-123",
  "message": "–ó–∞–ø–∏—Ç –ø—Ä–∏–π–Ω—è—Ç–æ"
}
```

## üì° API Endpoints

### 1. –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–∞–ø–∏—Ç –º–µ–Ω–µ–¥–∂–µ—Ä—É

**POST** `/api/manager/send-request`

**Request Body:**
```json
{
  "clientId": 123,
  "managerId": 1,
  "requestType": "order",
  "message": "–ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ –∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º",
  "additionalData": {
    "orderId": 456,
    "priority": "high"
  }
}
```

**Response:**
```json
{
  "success": true,
  "message": "–ó–∞–ø–∏—Ç —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –º–µ–Ω–µ–¥–∂–µ—Ä—É",
  "data": {
    "requestId": "req-123",
    "message": "–ó–∞–ø–∏—Ç –ø—Ä–∏–π–Ω—è—Ç–æ"
  }
}
```

### 2. –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–∞–ø–∏—Ç –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–ª—ñ—î–Ω—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞)

**POST** `/api/manager/send-request-by-client`

**Request Body:**
```json
{
  "clientId": 123,
  "requestType": "question",
  "message": "–ü–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ –ø—Ä–æ–¥—É–∫—Ç",
  "additionalData": {}
}
```

**Response:**
```json
{
  "success": true,
  "message": "–ó–∞–ø–∏—Ç —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –º–µ–Ω–µ–¥–∂–µ—Ä—É",
  "managerId": 1,
  "data": {
    "requestId": "req-123"
  }
}
```

### 3. –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤

**GET** `/api/manager/list`

**Response:**
```json
{
  "success": true,
  "managers": [
    {
      "id": 1,
      "name": "–Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤",
      "email": "ivan@example.com",
      "phone": "+380123456789"
    }
  ]
}
```

## üíª –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É

```javascript
// –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–∞–ø–∏—Ç –º–µ–Ω–µ–¥–∂–µ—Ä—É
const sendRequestToManager = async (clientId, managerId, requestType, message) => {
  try {
    const response = await axios.post(`${API_URL}/manager/send-request`, {
      clientId,
      managerId,
      requestType,
      message,
      additionalData: {
        // –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ
      }
    });
    
    if (response.data.success) {
      console.log('–ó–∞–ø–∏—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ:', response.data);
      return response.data;
    }
  } catch (error) {
    console.error('–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –∑–∞–ø–∏—Ç—É:', error);
    throw error;
  }
};

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
await sendRequestToManager(123, 1, 'order', '–ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ –∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º');
```

## üîê –ë–µ–∑–ø–µ–∫–∞

1. **API –∫–ª—é—á**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–º—ñ–Ω–Ω—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ `MANAGER_SERVICE_API_KEY` –¥–ª—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
2. **HTTPS**: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–µ—Ä–≤—ñ—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î HTTPS
3. **Timeout**: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ timeout 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤
4. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**: –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é

## üìù –¢–∏–ø–∏ –∑–∞–ø–∏—Ç—ñ–≤ (requestType)

–ú–æ–∂–ª–∏–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:
- `order` - –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `question` - –ü–∏—Ç–∞–Ω–Ω—è
- `complaint` - –°–∫–∞—Ä–≥–∞
- `support` - –¢–µ—Ö–Ω—ñ—á–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
- `custom` - –Ü–Ω—à–∏–π —Ç–∏–ø

## üêõ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

–Ø–∫—â–æ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π —Å–µ—Ä–≤—ñ—Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π –∞–±–æ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É:
- –ó–∞–ø–∏—Ç –ª–æ–≥—É—î—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É
- –°—Ç–∞—Ç—É—Å –∫–æ–¥ –ø–æ–º–∏–ª–∫–∏ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏

1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É
3. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ endpoint —á–µ—Ä–µ–∑ Postman –∞–±–æ curl:

```bash
curl -X POST https://your-app.railway.app/api/manager/send-request \
  -H "Content-Type: application/json" \
  -d '{
    "clientId": 123,
    "managerId": 1,
    "requestType": "question",
    "message": "–¢–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø–∏—Ç"
  }'
```

## üîÑ –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—è manager_id –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞ –≤ –ë–î:

```sql
ALTER TABLE clients ADD COLUMN manager_id INTEGER;
```

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ endpoint `/api/manager/send-request-by-client` –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `manager_id` –∫–ª—ñ—î–Ω—Ç–∞.

