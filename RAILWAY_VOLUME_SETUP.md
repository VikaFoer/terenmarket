# Налаштування Railway Volume для збереження даних

## Проблема
Після кожного деплою на Railway база даних та завантажені файли втрачаються, тому що вони зберігаються в ефемерній файловій системі контейнера.

## Рішення: Railway Volume

Railway Volume - це постійне сховище, яке зберігає дані між деплоями.

### Крок 1: Створення Volume в Railway

1. Відкрийте ваш проект на Railway: https://railway.app
2. Перейдіть до вашого сервісу (service)
3. Натисніть на вкладку **"Volumes"** (або знайдіть її в налаштуваннях)
4. Натисніть **"New Volume"**
5. Введіть назву Volume (наприклад: `data-volume`)
6. Встановіть шлях монтування: `/data` (або `/app/data`)
7. Натисніть **"Create"**

### Крок 2: Налаштування змінної оточення

1. У вашому сервісі перейдіть до вкладки **"Variables"**
2. Додайте нову змінну:
   - **Name**: `DATA_DIR`
   - **Value**: `/data` (або `/app/data` - залежить від шляху монтування Volume)
3. Збережіть змінні

### Крок 3: Перевірка

Після налаштування Volume та змінної `DATA_DIR`:

1. Зробіть деплой проекту
2. Перевірте логи Railway - ви повинні побачити:
   ```
   === Database Configuration ===
   DATA_DIR: /data
   DB_PATH: /data/database.sqlite
   ```
3. Створіть тестову категорію або завантажте тестове зображення
4. Зробіть новий деплой
5. Перевірте, що дані збереглися

### Альтернативне рішення: PostgreSQL

Якщо Volume не працює або виникають проблеми, можна мігрувати на PostgreSQL:

1. Створіть PostgreSQL сервіс в Railway
2. Отримайте connection string
3. Встановіть змінну оточення `DATABASE_URL`
4. Оновіть код для використання PostgreSQL замість SQLite

### Важливо

- **Volume має бути створений ДО першого деплою** з даними
- Якщо Volume створений після того, як дані вже були створені, вони будуть втрачені
- Переконайтеся, що шлях у `DATA_DIR` відповідає шляху монтування Volume
- Перевірте права доступу до Volume (зазвичай Railway налаштовує це автоматично)

### Перевірка в логах

Після деплою перевірте логи, щоб переконатися, що:
- `DATA_DIR` вказує на правильний шлях
- База даних знаходиться в правильному місці
- Папка `uploads/images` створюється в правильному місці

Якщо ви бачите помилки про відсутність файлів або папок, перевірте налаштування Volume та змінну `DATA_DIR`.

